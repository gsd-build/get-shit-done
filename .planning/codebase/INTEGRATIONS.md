# External Integrations

**Analysis Date:** 2026-02-01

## APIs & External Services

**NPM Registry:**
- npm view API - Check for available updates
  - Used in: `hooks/gsd-check-update.js`
  - Purpose: Fetch latest version of `get-shit-done-cc` from npmjs.org
  - Command: `npm view get-shit-done-cc version`
  - Timeout: 10 seconds
  - Method: HTTP request via npm CLI, runs in background

**Discord Community:**
- Discord Server: https://discord.gg/5JJgD5svVS
  - Reference only - not integrated programmatically
  - Displayed in help text and CLI output

## Runtime Platforms (Integrated)

**Claude Code:**
- Integration: Native commands via `/gsd:command` syntax
- Config directory: `~/.claude/` (can override with `CLAUDE_CONFIG_DIR`)
- Settings file: `~/.claude/settings.json`
- Hooks location: `~/.claude/hooks/`
- Agent interface: Claude Code's built-in agent system
- Features supported: Hooks (SessionStart), statusline, agents, slash commands

**OpenCode:**
- Integration: Adapted flat command structure with XDG Base Directory spec
- Config directory: `~/.config/opencode/` (follows XDG standard)
- Can override with `OPENCODE_CONFIG_DIR` env var
- Priority: `OPENCODE_CONFIG_DIR` > `OPENCODE_CONFIG` dirname > `XDG_CONFIG_HOME/opencode` > `~/.config/opencode`
- Settings file: `~/.config/opencode/opencode.json` (for permissions)
- Commands location: `~/.config/opencode/command/gsd-*.md` (flat structure)
- Permissions required: read access to GSD docs, external_directory access
- Features supported: Flat commands (no nesting), permission system, themes

**Gemini CLI:**
- Integration: TOML-based command format with experimental agents
- Config directory: `~/.gemini/` (can override with `GEMINI_CONFIG_DIR`)
- Settings file: `~/.gemini/settings.json`
- Agents location: `~/.gemini/agents/`
- Command format: `.toml` files (converted from Markdown YAML)
- Features supported: Experimental agents, auto-discovered MCP tools, built-in tools

## File Storage

**Local filesystem only:**
- All GSD files stored locally in user config directories
- No cloud storage, no external file services
- State and planning documents in project's `.planning/` directory
- No database required

**File locations created:**

| Directory | Purpose | Ownership |
|-----------|---------|-----------|
| `.planning/` | Project planning docs | Project (git tracked) |
| `.planning/config.json` | GSD project settings | Project (git tracked) |
| `.planning/phases/` | Phase documentation | Project (git tracked) |
| `.planning/quick/` | Ad-hoc task tracking | Project (git tracked) |
| `~/.claude/` | Claude Code config | User global |
| `~/.config/opencode/` | OpenCode config | User global |
| `~/.gemini/` | Gemini CLI config | User global |
| `~/.claude/cache/` | Update check cache | User (internal) |
| `~/.claude/todos/` | Task tracking for statusline | User (internal) |

## Data Storage

**No persistent external data storage:**
- No databases (SQL, NoSQL, or otherwise)
- No API backends
- No data synchronization between machines
- State is purely file-based and local

## Authentication & Identity

**Custom approach:**
- No auth provider integration
- No user accounts or login system
- No API keys or credentials storage
- Configuration is user-specific but not authenticated
- Environment variables for sensitive paths (config directories)

## Monitoring & Observability

**Error Tracking:**
- None detected - errors logged to stdout/stderr only
- No crash reporting service
- No telemetry collection

**Logs:**
- Console output only (stdout/stderr)
- Generated by CLI during installation and execution
- Hook output (statusline, update checks) goes to stdout
- Silent error handling in hooks (doesn't break parent process)

## CI/CD & Deployment

**Hosting:**
- npmjs.org (NPM registry) - Distributes the package
- GitHub repository: `glittercowboy/get-shit-done`
- No SaaS hosting or cloud infrastructure

**CI Pipeline:**
- `.github/` directory exists but content not analyzed
- Likely includes: publishing to NPM, running tests if any exist
- Package deployable via `npm install` or `npx` directly

**Build Process:**
```bash
npm run build:hooks     # Prepare hooks for distribution
npm run prepublishOnly  # Auto-runs build before npm publish
```

## Environment Configuration

**Required env vars (optional - for custom paths):**
- `CLAUDE_CONFIG_DIR` - Custom Claude Code config location
- `OPENCODE_CONFIG_DIR` - Custom OpenCode config location
- `OPENCODE_CONFIG` - Alternative to above (uses directory of file)
- `XDG_CONFIG_HOME` - XDG standard for OpenCode
- `GEMINI_CONFIG_DIR` - Custom Gemini config location

**No required API keys or secrets** - GSD is self-contained and doesn't authenticate to external services.

## Hooks & Callbacks

**Incoming:**
- None - GSD doesn't expose webhooks or API endpoints

**Outgoing:**

**SessionStart Hook (Claude Code & Gemini CLI):**
- File: `hooks/gsd-check-update.js`
- Trigger: On session start (when Claude/Gemini opens)
- Action: Spawns background process to check npm registry
- Updates cache file: `~/.claude/cache/gsd-update-check.json`
- Format: JSON with fields: `update_available`, `installed`, `latest`, `checked` (timestamp)
- Non-blocking: Spawned in background with `child.unref()` to not block session startup

**Statusline Hook (Claude Code & Gemini CLI):**
- File: `hooks/gsd-statusline.js`
- Trigger: Requested by Claude/Gemini for UI display
- Input: JSON stdin from Claude Code containing session data
- Output: Formatted string for status bar display
- Features:
  - Shows current model name
  - Shows current task (from `~/.claude/todos/`)
  - Shows working directory
  - Shows context window usage (color-coded with progress bar)
  - Shows update notification if available
- Silent failures: Errors don't crash statusline

## Data Exchange Formats

**Installation metadata:**
- JSON: `package.json`, settings files, cache files
- YAML frontmatter: Command and agent markdown files
- TOML: Gemini CLI command files (generated from Markdown)

**State files created during execution:**
- `PROJECT.md` - Markdown
- `REQUIREMENTS.md` - Markdown
- `ROADMAP.md` - Markdown
- `STATE.md` - Markdown with YAML sections
- `PLAN.md` - XML structure within Markdown
- `SUMMARY.md` - Markdown with structured sections
- `RESEARCH.md` - Markdown with organized findings
- `CONTEXT.md` - Markdown with decision documentation

**Todo state (for statusline):**
- JSON format in `~/.claude/todos/{session_id}-agent-{type}.json`
- Fields: `status`, `activeForm`, task tracking

## Tool Authorization

**For Claude Code:**
Tools declared in command frontmatter via `allowed-tools:` YAML array:
```yaml
allowed-tools:
  - Read
  - Write
  - Bash
  - Glob
  - Grep
  - Task
  - WebFetch
  - mcp__context7__*
```

**For OpenCode:**
Converted to `tools:` object format:
```yaml
tools:
  read: true
  write: true
  bash: true
  question: true
  skill: true
  todowrite: true
  webfetch: true
```

**For Gemini CLI:**
Converted to tools array:
```yaml
tools:
  - read_file
  - write_file
  - run_shell_command
  - glob
  - search_file_content
  - ask_user
  - web_fetch
```

**MCP (Model Context Protocol):**
- Support for MCP tools declared as `mcp__context7__*`
- Tools are auto-discovered at runtime in Gemini
- No explicit MCP configuration beyond permission declarations

## GitHub Integration

**Repository:**
- URL: https://github.com/glittercowboy/get-shit-done
- Used for: Source distribution, issue tracking, community engagement
- No programmatic GitHub API calls from GSD itself
- Release/publishing handled via CI pipeline

---

*Integration audit: 2026-02-01*
