---
phase: 01-opencode-research
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [docs/claude/opencode-mapping.md]
autonomous: true
---

<objective>
Research OpenCode platform conventions and create comprehensive mapping from Claude Code to OpenCode.

Purpose: Understand OpenCode's structure, frontmatter schema, and agent system to enable the GSD port.
Output: Complete mapping document enabling Phase 2 (installer) and Phase 3 (command adaptation).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/ARCHITECTURE.md
@.planning/codebase/STRUCTURE.md
@.planning/codebase/CONVENTIONS.md
@docs/claude/opencode-conversion-plan.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Research OpenCode platform conventions</name>
  <files>N/A - research task</files>
  <action>
    Use WebSearch and WebFetch to research OpenCode platform:
    1. Search for "OpenCode AI documentation" and "opencode.ai docs"
    2. Find the official documentation for:
       - Directory structure (.opencode/command/, .opencode/agent/)
       - YAML frontmatter schema for commands
       - Agent definition format
       - Tool declarations and available tools
       - How commands reference workflows/context
    3. Compare with existing docs/claude/opencode-conversion-plan.md findings
    4. Note any discrepancies or new information

    Key questions to answer:
    - What is the exact YAML frontmatter schema for OpenCode commands?
    - How do OpenCode agents work vs Claude Code's subagent spawning?
    - What tools are available in OpenCode and how do they map to Claude Code tools?
    - Are there any OpenCode-specific features GSD should leverage?
  </action>
  <verify>Research findings documented with specific schema details</verify>
  <done>OpenCode directory structure, frontmatter schema, and agent system understood</done>
</task>

<task type="auto">
  <name>Task 2: Create Claude Code â†’ OpenCode mapping document</name>
  <files>docs/claude/opencode-mapping.md</files>
  <action>
    Create comprehensive mapping document at docs/claude/opencode-mapping.md:

    ## Structure Mapping
    | Claude Code | OpenCode | Notes |
    |-------------|----------|-------|
    | .claude/commands/ | .opencode/command/ | ... |
    | ... | ... | ... |

    ## Frontmatter Mapping
    | Claude Code Field | OpenCode Field | Transform |
    |-------------------|----------------|-----------|
    | allowed-tools | tools | Rename, same values |
    | ... | ... | ... |

    ## Tool Name Mapping
    | Claude Code Tool | OpenCode Tool | Notes |
    |------------------|---------------|-------|
    | Read | ... | ... |
    | Write | ... | ... |
    | Bash | ... | ... |
    | ... | ... | ... |

    ## Command-by-Command Mapping
    For each of the 26 GSD commands, document:
    - Current Claude Code frontmatter
    - Required OpenCode frontmatter changes
    - Any workflow/reference path changes needed

    ## Agent System Comparison
    - Claude Code: Task tool spawns subagents
    - OpenCode: [document how agents work]
    - Mapping strategy for parallel execution
  </action>
  <verify>docs/claude/opencode-mapping.md exists with complete mapping tables</verify>
  <done>All 26 commands mapped, frontmatter transformation rules documented, tool mappings complete</done>
</task>

<task type="auto">
  <name>Task 3: Design shared source architecture</name>
  <files>docs/claude/opencode-mapping.md</files>
  <action>
    Add "Shared Source Architecture" section to opencode-mapping.md:

    ## Shared Source Architecture

    Design decisions:
    1. **Source of truth**: Where do master files live?
       - Option A: Claude Code format as source, transform at install time
       - Option B: Separate directories per platform
       - Option C: Shared core with platform-specific overlays

    2. **Install-time transformation**: What the installer must do
       - Path substitution patterns
       - Frontmatter field renaming
       - Tool name mapping (if different)

    3. **Shared files** (no changes needed):
       - workflows/*.md (execution logic)
       - templates/*.md (document structures)
       - references/*.md (conceptual guidance)

    4. **Platform-specific files**:
       - commands/gsd/*.md (frontmatter differs)
       - Any agent definitions (OpenCode-only)

    Document the recommended architecture with rationale.
  </action>
  <verify>Architecture section complete with clear recommendation</verify>
  <done>Shared source architecture designed with clear install-time transformation strategy</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] docs/claude/opencode-mapping.md exists
- [ ] All 26 commands have mapping entries
- [ ] Frontmatter transformation rules are specific (not vague)
- [ ] Tool name mapping is complete
- [ ] Shared source architecture has clear recommendation
</verification>

<success_criteria>
- Research completed with specific findings (not vague summaries)
- Mapping document enables Phase 2 installer implementation
- Architecture decision documented with rationale
- All GSD commands accounted for in mapping
</success_criteria>

<output>
After completion, create `.planning/phases/01-opencode-research/01-01-SUMMARY.md`
</output>
