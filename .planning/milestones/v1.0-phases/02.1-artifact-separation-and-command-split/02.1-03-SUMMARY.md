---
phase: 02.1-artifact-separation-and-command-split
plan: 03
subsystem: slash-commands
tags: [cli, slash-commands, milestones, actions, status, AskUserQuestion]

requires:
  - phase: 02.1-01
    provides: plan.js, milestone-folders.js, milestones.js (new format), load-graph.js
  - phase: 02.1-02
    provides: create-plan command, staleness-aware status, init milestones/ dir
provides:
  - /declare:milestones derives milestones only with checkbox UI
  - /declare:actions derives action plans per milestone
  - /declare:status shows coverage and staleness
  - workflows updated to match commands
affects: []

tech-stack:
  added: [AskUserQuestion tool]
  patterns: [checkbox confirmation UI, per-milestone action derivation]

key-files:
  created:
    - commands/declare/actions.md
    - commands/declare/status.md
    - workflows/actions.md
  modified:
    - commands/declare/milestones.md
    - workflows/milestones.md
    - src/commands/help.js
    - dist/declare-tools.cjs

key-decisions:
  - "/declare:milestones uses AskUserQuestion for checkbox confirmation per declaration"
  - "Action derivation is a separate command (/declare:actions), not part of milestones"
  - "Status renders coverage percentage and staleness indicators"
  - "Inconsistency flagging for re-derivation is user-driven, not auto-reconciled"

patterns-established:
  - "Checkbox confirmation via AskUserQuestion for batch selection"
  - "Per-milestone action plan derivation with approve/adjust/skip flow"
  - "Coverage and staleness rendering in status dashboard"

duration: 3min
completed: 2026-02-16
---

# Plan 02.1-03: Slash Commands Summary

**Rewritten slash commands and workflows for milestones-only derivation, new action plan derivation, and coverage-aware status**

## Performance

- **Duration:** 3 min
- **Started:** 2026-02-16
- **Completed:** 2026-02-16
- **Tasks:** 2
- **Files modified:** 7

## Accomplishments
- Rewrote /declare:milestones to derive milestones only with AskUserQuestion checkbox confirmation
- Rewrote workflows/milestones.md to remove all action derivation (milestones-only)
- Created /declare:actions command and workflows/actions.md for per-milestone action plan derivation
- Created commands/declare/status.md with coverage and staleness rendering sections
- Updated help.js with /declare:milestones and /declare:actions entries
- Installed new commands to user-level ~/.claude/commands/declare/
- Bundle rebuilt; 53 tests pass (22 command + 31 artifact)

## Task Commits

1. **Task 1+2: Slash commands and workflows** - `3e3fe56` (feat)

## Decisions Made
- AskUserQuestion for checkbox UI (not freeform confirmation)
- Separate action derivation command (not bundled with milestones)
- User-driven inconsistency flagging (no auto-reconciliation)

## Deviations from Plan
None.

## Issues Encountered
None.

## User Setup Required
None -- commands installed to user-level path automatically.

## Next Phase Readiness
- Phase 02.1 complete: artifact layer, CLI subcommands, and slash commands all updated

---
*Phase: 02.1-artifact-separation-and-command-split*
*Completed: 2026-02-16*
